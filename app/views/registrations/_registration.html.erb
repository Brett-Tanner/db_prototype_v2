<%# Local variables %>
<% child = registration.child %>
<% slot = registration.registerable %>

<%# Content %>
<%= turbo_frame_tag "child#{child.id}_slot#{slot.id}" do %>
    <div class="registration">
        <%= link_to child.ja_name, child_path(child) %>

        <%= form_with model: registration, class: 'registration_form' do |f| %>
            <% if current_user.customer? %>              
                <div class="field date">
                    <%= f.label :billing_date, t('.billing_date') %>
                    <%= f.date_field :billing_date, disabled: true %>
                </div>
                <div class="field check_box">
                    <%= f.label :confirmed, t('.con') %>
                    <%= f.check_box :confirmed, disabled: true %>
                </div>
                <div class="field check_box">
                    <%= f.label :paid, t('.paid') %>
                    <%= f.check_box :paid, disabled: true %>
                </div>
                <% if registration.cost == registration.adjusted_cost %>
                    <div class="field cost">
                        <%= f.label :cost, t('.cost') %>
                        <%= f.number_field :cost, disabled: true %>
                    </div>
                <% else %>
                    <div class="field cost">
                        <p><%= t('.adjusted_cost') %></p>
                        <p><%= registration.adjusted_cost %></p>
                    </div>
                <% end %>
            <% else %>
                <div class="field date">
                    <%= f.label :billing_date, t('.billing_date') %>
                    <%= f.date_field :billing_date %>
                </div>
                <div class="field check_box">
                    <%= f.label :confirmed, t('.con') %>
                    <%= f.check_box :confirmed %>
                </div>
                <div class="field check_box">
                    <%= f.label :paid, t('.paid') %>
                    <%= f.check_box :paid %>
                </div>
                <% if registration.cost == registration.adjusted_cost %>
                    <div class="field cost">
                        <%= f.label :cost, t('.cost') %>
                        <%= f.number_field :cost, disabled: true %>
                    </div>
                <% else %>
                    <div class="field cost">
                        <%= f.label :cost, t('.adjusted_cost') %>
                        <%= f.number_field :cost, disabled: true, value: registration.adjusted_cost %>
                    </div>
                <% end %>
                <%= f.submit t('.update'), class: 'button' %>
            <% end %>
        <% end %>

        <%= link_to t('.delete'), registration_path(registration), data: {turbo_method: :delete, turbo_confirm: t('.delete_confirm', child: child.ja_name, slot: slot.name)}, class: 'button' %>
    </div>

    <div class="registration_options_container">
        <h5><%= t('.options') %></h5>
        <%= render slot.options, child: child %>
    </div>
<% end %>
                
