<%# Update flash message %>
<%= turbo_stream.update "flash", partial: "shared/flash" %>



<%# For User#show %>
<%# Update slot registration if changed %>
<%= turbo_stream.replace "child#{@registration.child_id}_slot#{@registration.registerable_id}", partial: "registrations/unregistered", locals: { child: @registration.child, slot: @registration.registerable } if @registration.slot_registration?%>

<%# Update option registration if changed %>
<%= turbo_stream.replace "child#{@registration.child_id}_opt#{@registration.registerable_id}", partial: "options/option", locals: { child: @registration.child, option: @registration.registerable } unless @registration.slot_registration? %>



<%# For Child#index %>
<%# Update slot registration, and its attend PM option, if changed %>
<% if @registration.slot_registration? %>
    <%= turbo_stream.replace "child#{@registration.child_id}_#{@registration.registerable_type}#{@registration.registerable_id}_mini", partial: 'registrations/register_button', locals: { child: @registration.child, registerable: @registration.registerable } %>

    <% pm = @registration.registerable.options.find_by(name: 'Attend PM') %>
    <%= turbo_stream.replace "child#{@registration.child_id}_Option#{pm.id}_mini", partial: 'registrations/register_button', locals: { child: @registration.child, registerable: pm } %>
<% end %>



<%# Update option registration if changed %>
<%= turbo_stream.replace "child#{@registration.child_id}_#{@registration.registerable_type}#{@registration.registerable_id}_mini", partial: 'registrations/register_button', locals: { child: @registration.child, registerable: @registration.registerable } unless @registration.slot_registration? %>