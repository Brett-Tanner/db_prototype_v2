<main id="child_show">
    <div class="card">
        <h1><%= @child.name %></h1>
        <h3>SSID: <%= @child.ssid %></h3>
        <h3><%= link_to "#{t('.parent')} #{@child.parent.name}", user_path(@child.parent) unless @child.parent_id.nil? %></h3>


        <div class="info">
            <div class="personal_info">
                <p><%= "#{t('.kana')} #{@child.katakana_name}" %></p>
                <p><%= "#{t('.en')} #{@child.en_name}" %></p>
                <p><%= "#{t('.bday')} #{@child.birthday}" %></p>
                <p><%= "#{t('.allergies')} #{@child.allergies}" %></p>
            </div>
            <div class="staff_info">
                <p>
                    <%= "#{t('.photos')} ◯" if @child.photos == 'OK' %>
                    <%= "#{t('.photos')} ✖" unless @child.photos == 'OK' %>
                </p>
                <p>
                    <% if @child.received_hat %>
                        <%= "#{t('.has_hat')} ◯" %>
                    <% else %>
                        <%= "#{t('.has_hat')} ✖" %>
                    <% end %>
                </p>
            </div>
            <div class="school_info">
                <p>
                    <%= t(".no_school") if @child.school.nil? %>
                    <%= "#{t(".school")} #{@child.school.name}" unless @child.school.nil? %>
                </p>
                <p><%= "#{t('.category')} #{@child.category.capitalize}" %></p>
                <p><%= (@child.kindy) ? 'Kindy' : 'Elementary' %></p>
                <% if current_user.staff? %>
                    <div data-controller="conditional"
                        data-conditional-pin-value=<%= current_user.pin %>>
                        <p class="d-none" data-conditional-target="target">
                            <%= "#{t('ele_school')}: #{@child.ele_school_name}" %>
                        </p>
                        <div class="form-floating" data-conditional-target="target">
                            <%= text_field_tag t('enter_pin', info: t('ele_school')), '', class: 'form-control', placeholder: t('enter_pin', info: t('ele_school')), maxlength: 4, data: { 'conditional-target': 'condition', action: 'conditional#pin' } %>
                            <%= label_tag t('enter_pin', info: t('ele_school')), nil, class: 'form-label' %>
                        </div>
                    </div>
                <% end %>
            </div>
        </div>


        <% if current_user.admin? || current_user.area_manager?  || current_user.id == @child.parent_id %>
            <div class="staff_options">
                <%= link_to t('.edit_child'), edit_child_path(@child), class: 'btn btn-primary' unless @child.ssid %>
            </div>
        <% end %>
    </div>

    <%= link_to t('.child_bookings', child: @child.name), invoices_path(child: @child.id), class: 'btn btn-primary' %>

    <% unless @child.events.empty? %>
        <h2><%= t('.next_event') %></h2>
        <%= render @child.events.where("start_date > ?", Time.zone.now).order(:start_date).first, partial: 'events/event', child: @child %>
    <% end %>
</main>