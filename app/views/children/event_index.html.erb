<main id="event_children_index">
    <h1><%= @source.name %></h1>

    <table>
        <% cols = @source.time_slots.morning.size %>
        <% special = @source.time_slots.select { |slot| slot.special? } %>
        
        <thead>
            <tr>
                <th rowspan="2" id="order_header" class="order"></th>
                <th rowspan="2" id="ja_header" class="ja_name">Name (日本語)</th>
                <th rowspan="2" id="en_header" class="en_name">Name (英語)</th>
                <th rowspan="2" id="ssid_header" class="ssid">SSID</th>
                <th rowspan="2"><%= t('.cost') %></th>
                <th rowspan="2"><%= t('.summary') %></th>
                <th rowspan="2"><%= t('.changes') %></th>
                <th rowspan="2"><%= t('.billing_date') %></th>
                <th rowspan="2"><%= t('.email_template') %></th>
                <th rowspan="2"><%= t('.reg_days') %></th>
                <th rowspan="2"><%= t('.allergy') %></th>
                <th rowspan="2"><%= t('.allergy_details') %></th>
                <th rowspan="2"><%= t('.photo_ok') %></th>
                <% unless special.size.zero? %>
                    <th colspan="3"><%= "スペシャルデー #{special.first.start_time.strftime('%m月%d日')}" %></th>
                <% end %>
                <% cols.times do |i| %>
                    <th colspan="3"><%= "Day #{i + 1}" %></th>
                <% end %>
            </tr>
            <tr>
                <% unless special.size.zero? %>
                    <th>午前 / 午後</th>
                    <th>昼食 / 中延長</th>
                    <th>延長(前) / 延長(後)</th>
                <% end %>
                <% cols.times do |i| %>
                    <th>午前 / 午後</th>
                    <th>昼 / 晩</th>
                    <th>延長(前) / 延長(後)</th>
                <% end %>
            </tr>
        </thead>

        <%= render partial: 'children/event_child', collection: @children, locals: { cols: cols, event: @source } %>
    </table>
</main>