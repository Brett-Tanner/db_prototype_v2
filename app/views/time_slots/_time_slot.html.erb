<div class="time_slot">
    <h3><%= link_to time_slot.name, time_slot_path(time_slot) %></h3>
    <h5><%= t('.date', date: time_slot.date) %></h5>
    <h5><%= t('.times', time: time_slot.times) %></h5>

    <p><%= time_slot.description %></p>
    <p><%= t('.reg_count', num_kids: time_slot.children.distinct.size) %></p>

    <div class="slot_registrations">
        <% unless children.empty? %>
            <% children.each do |child| %>
                <% registration = child.registrations.where(registerable: time_slot).first %>

                <% unless registration.present? %>
                    <%= render Registration.new, child: child, time_slot: time_slot %>
                <% end %>

                <% if registration.present? %>
                    <div class="registration">
                        <%= link_to child.ja_name, child_path(child) %>
                        <%= link_to t('.delete'), registration_path(registration), data: {turbo_method: :delete, turbo_confirm: t('.delete_confirm')}, class: 'delete_button' %>
                    </div>
                    <%= render registration.registerable.options, child: child %>
                <% end %>
            <% end %>
        <% end %>
    </div>
</div>